import{O as P,i,a as n,g as f,A as x,f as $,C as k,I as D,h as I,j as S,t as u}from"./index-69f0698f.js";import{T as M}from"./index-3c53b4a9.js";import{I as _}from"./input-194e738a.js";const V=u('<div class="cm-field-prepend">'),L=u('<div class="cm-field-selection">'),q=u('<div class="cm-field-text">'),A=u('<div tabindex="1"><input type="hidden"><span>A</span><span class="cm-field-cert">'),F=u('<span class="cm-field-placeholder">');function T(e){const[d,m]=e.query??[()=>"",()=>{}];let r;const w=t=>{t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),e.onClear&&e.onClear(t)},v=()=>({"cm-field-value":!0,"cm-field-clearable":e.clearable&&!!e.text&&!!e.text.length,"cm-field-disabled":e.disabled,[`cm-field-value-${e.size}`]:!!e.size}),C=()=>(Promise.resolve().then(()=>{e.filter&&r&&r.focus()}),e.multi&&e.text&&e.text instanceof Array?e.text.map((t,o)=>({id:t.id,title:t.title})):[]),h=()=>{const t=e.filter?d():"";return{width:t!==void 0?t.length*12+20+"px":"100%"}},b=()=>{e.filter&&r&&r.focus()},z=t=>{const o=d();(t.key==="Backspace"||t.code==="Backspace"||t.key==="Delete"||t.code==="Delete")&&o.length===0&&e.onDeleteLastValue&&e.onDeleteLastValue()};return(()=>{const t=A(),o=t.firstChild,c=o.nextSibling,g=c.nextSibling;return t.$$click=b,c.style.setProperty("width","0px"),c.style.setProperty("font-size","12px"),c.style.setProperty("visibility","hidden"),c.style.setProperty("line-height","initial"),i(t,n(f,{get when(){return e.prepend},get children(){const l=V();return i(l,()=>e.prepend),l}}),g),i(t,n(k,{get children(){return[n(x,{get when(){return e.multi},get children(){const l=L();return i(l,n(M,{get data(){return C()},get closable(){return e.valueClosable},get max(){return e.showMax},get showMore(){return e.showMore},get onClose(){return e.onClose},get size(){return e.size==="small"?"small":"large"}}),null),i(l,(()=>{const a=$(()=>!!e.filter);return()=>a()?n(_,{ref(s){const y=r;typeof y=="function"?y(s):r=s},get style(){return h()},notCreateFiled:!0,class:"cm-select-filter",trigger:"input",get size(){return e.size},value:[d,m],onKeyDown:z}):null})(),null),l}}),n(x,{get when(){return!e.multi},get children(){const l=q();return i(l,n(f,{get when(){return!e.filter},get children(){return $(()=>!!e.text)()?e.text:(()=>{const a=F();return i(a,()=>e.placeholder??""),a})()}}),null),i(l,n(f,{get when(){return e.filter},get children(){return n(_,{ref(a){const s=r;typeof s=="function"?s(a):r=a},get style(){return h()},notCreateFiled:!0,class:"cm-select-filter",trigger:"input",get size(){return e.size},value:[d,m]})}}),null),l}})]}}),g),i(g,()=>e.icon),i(t,n(f,{get when(){return e.clearable&&e.text&&e.text!==""},get children(){return n(D,{name:"x-circle",class:"cm-field-clear",onClick:w})}}),null),I(l=>S(t,v(),l)),t})()}P(["click"]);export{T as V};
