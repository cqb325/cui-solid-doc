import{X as ce,a as L,a3 as le,m as me,i as R,t as M,Z as ae,k as fe,c as se,_ as Y,g as ge,P as ye,u as Q,h as he,j as pe,s as k}from"./index-5e251d81.js";const ve=M('<form><button type="submit">'),G=ae();function nr(t){const e=t.errorTransfer??!1,r=t.errorAlign??"right",n=()=>fe(t,"cm-form",{"cm-form-inline":t.inline}),[i,a]=ce(t,["labelWidth","form","inline","classList","class","onChange","children","onBeforeSubmit"]),f=(g,p)=>{i.form&&(i.form[g]=p),i.onChange&&i.onChange(g,p)},s={labelWidth:i.labelWidth,inline:i.inline,form:i.form,errorTransfer:e,errorAlign:r,onChange:f},d=g=>(g.preventDefault(),i.onBeforeSubmit?i.onBeforeSubmit():!1);return L(G.Provider,{value:s,get children(){const g=ve(),p=g.firstChild;return g.addEventListener("submit",d),le(g,me({get classList(){return n()}},a,{get autocomplete(){return t.autocomplete}}),!1,!0),p.style.setProperty("display","none"),R(g,()=>i.children,null),g}})}function we(){return{required(t){return t==null?!1:t instanceof Array?t.length>0:`${t}`.length>0},email(t){return/^[a-zA-Z0-9.!#$%&\'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url(t){return new RegExp("^(?:(?:(?:https?|ftp):)?//)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)(?:.(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)*(?:.(?:[a-z¡-￿]{2,})).?)(?::d{2,5})?(?:[/?#]S*)?$","i").test(t)},minLength(t,e){return(t?t.length:0)>=e},maxLength(t,e){return(t?t.length:0)<=e},min(t,e){return t>=e},max(t,e){return t<=e},range(t,e){return t>=e[0]&&t<=e[1]},price(t){return/^\d+(.\d{1,2})?$/.test(t)},idCard(t){return/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)},noSpecial(t){return/^[\u4E00-\u9FA5A-Za-z0-9_&]+$/.test(t)},userName(t){return/^[\u4E00-\u9FA5A-Za-z0-9*]+$/.test(t)},mobile(t){return/^1[3-8][0-9]{9}$/.test(t)},ip(t){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(t)},equalTo(t,e,r){const n=r[e];return t===n}}}function j(){return j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j.apply(this,arguments)}function qe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,T(t,e)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I(t)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},T(t,e)}function be(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z(t,e,r){return be()?Z=Reflect.construct.bind():Z=function(i,a,f){var s=[null];s.push.apply(s,a);var d=Function.bind.apply(i,s),g=new d;return f&&T(g,f.prototype),g},Z.apply(null,arguments)}function Fe(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function W(t){var e=typeof Map=="function"?new Map:void 0;return W=function(n){if(n===null||!Fe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Z(n,arguments,I(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),T(i,n)},W(t)}var xe=/%[sdj%]/g,Ae=function(){};typeof process<"u"&&process.env;function U(t){if(!t||!t.length)return null;var e={};return t.forEach(function(r){var n=r.field;e[n]=e[n]||[],e[n].push(r)}),e}function A(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=0,a=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var f=t.replace(xe,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch{return"[Circular]"}break;default:return s}});return f}return t}function Oe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function q(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Oe(e)&&typeof t=="string"&&!t)}function Ee(t,e,r){var n=[],i=0,a=t.length;function f(s){n.push.apply(n,s||[]),i++,i===a&&r(n)}t.forEach(function(s){e(s,f)})}function ee(t,e,r){var n=0,i=t.length;function a(f){if(f&&f.length){r(f);return}var s=n;n=n+1,s<i?e(t[s],a):r([])}a([])}function _e(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,t[r]||[])}),e}var re=function(t){qe(e,t);function e(r,n){var i;return i=t.call(this,"Async Validation Error")||this,i.errors=r,i.fields=n,i}return e}(W(Error));function $e(t,e,r,n,i){if(e.first){var a=new Promise(function(w,O){var x=function(o){return n(o),o.length?O(new re(o,U(o))):w(i)},u=_e(t);ee(u,r,x)});return a.catch(function(w){return w}),a}var f=e.firstFields===!0?Object.keys(t):e.firstFields||[],s=Object.keys(t),d=s.length,g=0,p=[],v=new Promise(function(w,O){var x=function(l){if(p.push.apply(p,l),g++,g===d)return n(p),p.length?O(new re(p,U(p))):w(i)};s.length||(n(p),w(i)),s.forEach(function(u){var l=t[u];f.indexOf(u)!==-1?ee(l,r,x):Ee(l,r,x)})});return v.catch(function(w){return w}),v}function Pe(t){return!!(t&&t.message!==void 0)}function je(t,e){for(var r=t,n=0;n<e.length;n++){if(r==null)return r;r=r[e[n]]}return r}function te(t,e){return function(r){var n;return t.fullFields?n=je(e,t.fullFields):n=e[r.field||t.fullField],Pe(r)?(r.field=r.field||t.fullField,r.fieldValue=n,r):{message:typeof r=="function"?r():r,fieldValue:n,field:r.field||t.fullField}}}function ne(t,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];typeof n=="object"&&typeof t[r]=="object"?t[r]=j({},t[r],n):t[r]=n}}return t}var oe=function(e,r,n,i,a,f){e.required&&(!n.hasOwnProperty(e.field)||q(r,f||e.type))&&i.push(A(a.messages.required,e.fullField))},Ve=function(e,r,n,i,a){(/^\s+$/.test(r)||r==="")&&i.push(A(a.messages.whitespace,e.fullField))},D,Re=function(){if(D)return D;var t="[a-fA-F\\d:]",e=function(h){return h&&h.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+r+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+r+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+r+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+r+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+r+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+r+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+r+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+r+"$)|(?:^"+i+"$)"),f=new RegExp("^"+r+"$"),s=new RegExp("^"+i+"$"),d=function(h){return h&&h.exact?a:new RegExp("(?:"+e(h)+r+e(h)+")|(?:"+e(h)+i+e(h)+")","g")};d.v4=function(c){return c&&c.exact?f:new RegExp(""+e(c)+r+e(c),"g")},d.v6=function(c){return c&&c.exact?s:new RegExp(""+e(c)+i+e(c),"g")};var g="(?:(?:[a-z]+:)?//)",p="(?:\\S+(?::\\S*)?@)?",v=d.v4().source,w=d.v6().source,O="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",x="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",u="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",l="(?::\\d{2,5})?",o='(?:[/?#][^\\s"]*)?',y="(?:"+g+"|www\\.)"+p+"(?:localhost|"+v+"|"+w+"|"+O+x+u+")"+l+o;return D=new RegExp("(?:^"+y+"$)","i"),D},ie={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},C={integer:function(e){return C.number(e)&&parseInt(e,10)===e},float:function(e){return C.number(e)&&!C.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!C.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(ie.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Re())},hex:function(e){return typeof e=="string"&&!!e.match(ie.hex)}},Se=function(e,r,n,i,a){if(e.required&&r===void 0){oe(e,r,n,i,a);return}var f=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;f.indexOf(s)>-1?C[s](r)||i.push(A(a.messages.types[s],e.fullField,e.type)):s&&typeof r!==e.type&&i.push(A(a.messages.types[s],e.fullField,e.type))},Ce=function(e,r,n,i,a){var f=typeof e.len=="number",s=typeof e.min=="number",d=typeof e.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=r,v=null,w=typeof r=="number",O=typeof r=="string",x=Array.isArray(r);if(w?v="number":O?v="string":x&&(v="array"),!v)return!1;x&&(p=r.length),O&&(p=r.replace(g,"_").length),f?p!==e.len&&i.push(A(a.messages[v].len,e.fullField,e.len)):s&&!d&&p<e.min?i.push(A(a.messages[v].min,e.fullField,e.min)):d&&!s&&p>e.max?i.push(A(a.messages[v].max,e.fullField,e.max)):s&&d&&(p<e.min||p>e.max)&&i.push(A(a.messages[v].range,e.fullField,e.min,e.max))},V="enum",Ne=function(e,r,n,i,a){e[V]=Array.isArray(e[V])?e[V]:[],e[V].indexOf(r)===-1&&i.push(A(a.messages[V],e.fullField,e[V].join(", ")))},Te=function(e,r,n,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||i.push(A(a.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var f=new RegExp(e.pattern);f.test(r)||i.push(A(a.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},m={required:oe,whitespace:Ve,type:Se,range:Ce,enum:Ne,pattern:Te},ze=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r,"string")&&!e.required)return n();m.required(e,r,i,f,a,"string"),q(r,"string")||(m.type(e,r,i,f,a),m.range(e,r,i,f,a),m.pattern(e,r,i,f,a),e.whitespace===!0&&m.whitespace(e,r,i,f,a))}n(f)},De=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a),r!==void 0&&m.type(e,r,i,f,a)}n(f)},Le=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(r===""&&(r=void 0),q(r)&&!e.required)return n();m.required(e,r,i,f,a),r!==void 0&&(m.type(e,r,i,f,a),m.range(e,r,i,f,a))}n(f)},Ze=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a),r!==void 0&&m.type(e,r,i,f,a)}n(f)},Me=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a),q(r)||m.type(e,r,i,f,a)}n(f)},Be=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a),r!==void 0&&(m.type(e,r,i,f,a),m.range(e,r,i,f,a))}n(f)},Ie=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a),r!==void 0&&(m.type(e,r,i,f,a),m.range(e,r,i,f,a))}n(f)},We=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(r==null&&!e.required)return n();m.required(e,r,i,f,a,"array"),r!=null&&(m.type(e,r,i,f,a),m.range(e,r,i,f,a))}n(f)},Ue=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a),r!==void 0&&m.type(e,r,i,f,a)}n(f)},Je="enum",Xe=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a),r!==void 0&&m[Je](e,r,i,f,a)}n(f)},Ye=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r,"string")&&!e.required)return n();m.required(e,r,i,f,a),q(r,"string")||m.pattern(e,r,i,f,a)}n(f)},Ge=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r,"date")&&!e.required)return n();if(m.required(e,r,i,f,a),!q(r,"date")){var d;r instanceof Date?d=r:d=new Date(r),m.type(e,d,i,f,a),d&&m.range(e,d.getTime(),i,f,a)}}n(f)},Ke=function(e,r,n,i,a){var f=[],s=Array.isArray(r)?"array":typeof r;m.required(e,r,i,f,a,s),n(f)},B=function(e,r,n,i,a){var f=e.type,s=[],d=e.required||!e.required&&i.hasOwnProperty(e.field);if(d){if(q(r,f)&&!e.required)return n();m.required(e,r,i,s,a,f),q(r,f)||m.type(e,r,i,s,a)}n(s)},He=function(e,r,n,i,a){var f=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(q(r)&&!e.required)return n();m.required(e,r,i,f,a)}n(f)},N={string:ze,method:De,number:Le,boolean:Ze,regexp:Me,integer:Be,float:Ie,array:We,object:Ue,enum:Xe,pattern:Ye,date:Ge,url:B,hex:B,email:B,required:Ke,any:He};function J(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var X=J(),z=function(){function t(r){this.rules=null,this._messages=X,this.define(r)}var e=t.prototype;return e.define=function(n){var i=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(a){var f=n[a];i.rules[a]=Array.isArray(f)?f:[f]})},e.messages=function(n){return n&&(this._messages=ne(J(),n)),this._messages},e.validate=function(n,i,a){var f=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=n,d=i,g=a;if(typeof d=="function"&&(g=d,d={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,s),Promise.resolve(s);function p(u){var l=[],o={};function y(h){if(Array.isArray(h)){var b;l=(b=l).concat.apply(b,h)}else l.push(h)}for(var c=0;c<u.length;c++)y(u[c]);l.length?(o=U(l),g(l,o)):g(null,s)}if(d.messages){var v=this.messages();v===X&&(v=J()),ne(v,d.messages),d.messages=v}else d.messages=this.messages();var w={},O=d.keys||Object.keys(this.rules);O.forEach(function(u){var l=f.rules[u],o=s[u];l.forEach(function(y){var c=y;typeof c.transform=="function"&&(s===n&&(s=j({},s)),o=s[u]=c.transform(o)),typeof c=="function"?c={validator:c}:c=j({},c),c.validator=f.getValidationMethod(c),c.validator&&(c.field=u,c.fullField=c.fullField||u,c.type=f.getType(c),w[u]=w[u]||[],w[u].push({rule:c,value:o,source:s,field:u}))})});var x={};return $e(w,d,function(u,l){var o=u.rule,y=(o.type==="object"||o.type==="array")&&(typeof o.fields=="object"||typeof o.defaultField=="object");y=y&&(o.required||!o.required&&u.value),o.field=u.field;function c(F,P){return j({},P,{fullField:o.fullField+"."+F,fullFields:o.fullFields?[].concat(o.fullFields,[F]):[F]})}function h(F){F===void 0&&(F=[]);var P=Array.isArray(F)?F:[F];!d.suppressWarning&&P.length&&t.warning("async-validator:",P),P.length&&o.message!==void 0&&(P=[].concat(o.message));var _=P.map(te(o,s));if(d.first&&_.length)return x[o.field]=1,l(_);if(!y)l(_);else{if(o.required&&!u.value)return o.message!==void 0?_=[].concat(o.message).map(te(o,s)):d.error&&(_=[d.error(o,A(d.messages.required,o.field))]),l(_);var S={};o.defaultField&&Object.keys(u.value).map(function($){S[$]=o.defaultField}),S=j({},S,u.rule.fields);var K={};Object.keys(S).forEach(function($){var E=S[$],ue=Array.isArray(E)?E:[E];K[$]=ue.map(c.bind(null,$))});var H=new t(K);H.messages(d.messages),u.rule.options&&(u.rule.options.messages=d.messages,u.rule.options.error=d.error),H.validate(u.value,u.rule.options||d,function($){var E=[];_&&_.length&&E.push.apply(E,_),$&&$.length&&E.push.apply(E,$),l(E.length?E:null)})}}var b;if(o.asyncValidator)b=o.asyncValidator(o,u.value,h,u.source,d);else if(o.validator){try{b=o.validator(o,u.value,h,u.source,d)}catch(F){console.error?.(F),d.suppressValidatorError||setTimeout(function(){throw F},0),h(F.message)}b===!0?h():b===!1?h(typeof o.message=="function"?o.message(o.fullField||o.field):o.message||(o.fullField||o.field)+" fails"):b instanceof Array?h(b):b instanceof Error&&h(b.message)}b&&b.then&&b.then(function(){return h()},function(F){return h(F)})},function(u){p(u)},s)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!N.hasOwnProperty(n.type))throw new Error(A("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var i=Object.keys(n),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?N.required:N[this.getType(n)]||void 0},t}();z.register=function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");N[e]=r};z.warning=Ae;z.messages=X;z.validators=N;const Qe=M('<div class="cm-form-item-element">'),ke=M('<div><label class="cm-form-label">'),er=M('<div class="cm-form-item-element"><div class="cm-form-item-error-tip">'),de=ae();function ir(t){const[e,r]=se(null),n=Y(G),i=we();let a;const f=t.errorTransfer??n?.errorTransfer??!1,s=t.errorAlign??n?.errorAlign??"right",d=t.name;let g=!1;if(d&&n?.form?.getValidation&&n?.form?.getValidation(d)){const u=n.form.getValidation(d);g=Array.isArray(u)?u.some(l=>l.required):u.required}t.rules&&(g=Array.isArray(t.rules)?t.rules.some(u=>u.required):t.rules.required);const p=()=>fe(t,"cm-form-item",{"cm-form-item-error":e(),"cm-form-item-inline":t.inline||n?.inline,"cm-form-item-required":g}),v=async(u,l,o)=>{if(l.required){const y=await i.required(u,l.required,n?.form);if(!y)return r(o?o.required:""),y}for(const y in l)if(y!=="required"){if(i[y]){const c=await i[y](u,l[y],n?.form);if(!c)return r(o?o[y]:""),c}if(l[y]&&typeof l[y]=="function"){const c=await l[y](u,n?.form);if(!c)return r(o?o[y]:""),c}}return r(null),!0},w=async(u,l)=>{const o={[`${d}`]:l},y=new z(o),c={[`${d}`]:u};return new Promise(h=>{y.validate(c,{firstFields:!0},b=>{b?(r(b[0].message),h(!1)):(r(null),h(!0))})})},O=async u=>{if(a){const l=a.getBoundingClientRect();if(l.width===0||l.height===0)return!0}if(d&&n&&n.form?.getValidation&&n.form?.getValidation(d)||n&&t.rules){const l=n.form.getValidation(d)||t.rules,o=n.form.getMessage(d)||t.messages;return Array.isArray(l)?w(u,l):v(u,l,o)}return!0};t.name||console.warn("formItem needs name property to check valid");const x=()=>{r(null)};return t.name&&n?.form?.setCheckValid&&n.form?.setCheckValid(t.name,O),t.name&&n?.form?.setClearValid&&n.form?.setClearValid(t.name,x),L(de.Provider,{get value(){return{name:t.name}},get children(){const u=ke(),l=u.firstChild;return R(l,()=>t.label),R(u,L(ge,{when:f,get fallback(){return(()=>{const o=er(),y=o.firstChild,c=a;return typeof c=="function"?Q(c,o):a=o,R(o,()=>t.children,y),R(y,e),o})()},get children(){return L(ye,{class:"cm-form-item-error-popover",arrow:!0,align:s,get disabled(){return!e()},get content(){return e()},get children(){const o=Qe(),y=a;return typeof y=="function"?Q(y,o):a=o,R(o,()=>t.children),o}})}}),null),he(o=>{const y=p(),c=t.style,h={width:n?.labelWidth+"px",...t.labelStyle};return o._v$=pe(u,y,o._v$),o._v$2=k(u,c,o._v$2),o._v$3=k(l,h,o._v$3),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),u}})}const rr=()=>Y(de);function ar(t,e,r){arguments.length===2&&(r=e,e="value");let n,i;t[e]&&t[e].length===2&&typeof t[e][0]=="function"?(n=t[e][0],i=t[e][1]):[n,i]=se(t[e]||r);const a=Y(G),f=a?.form?.getFormData?a.form?.getFormData():{},d=rr()?.name||t.name,g=f&&d?f[d]:void 0;return g!=null&&!t.notCreateFiled&&i(g),a&&a.form&&d&&!t.notCreateFiled&&a.form.bindController(d,n,i),[n,v=>(i(v),t.notCreateFiled||a?.onChange(d,v),v)]}export{nr as F,ir as a,ar as c,we as u};
