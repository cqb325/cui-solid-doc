import{n as S,N as f,i as u,e as b,g as h,h as _,t as v,c as w,a as $,F as L,s as R,j as y}from"./index-452b01fb.js";import{c as F}from"./createField-daacc4ef.js";const D=v("<div><span>"),N=v('<span class="cm-rate-star-content">');function P(e){const[s,d]=e.current,o=()=>{let a=!1,t=!1;return e.index<=s()-1&&(t=!0),e.index>s()-1&&e.index<s()&&(a=!0),{"cm-rate-star":!0,"cm-rate-star-zero":!t&&!a,"cm-rate-star-half":e.allowHalf&&a,"cm-rate-star-full":t}};return(()=>{const a=D(),t=a.firstChild;return f(t,"click",e.onClickStar?.bind(null,e.index+1),!0),f(t,"mouseenter",e.onMouseEnter?.bind(null,e.index+1)),u(t,()=>e.icon),u(a,(()=>{const r=b(()=>!!e.allowHalf);return()=>r()?(()=>{const c=N();return f(c,"click",e.onClickHalfStar?.bind(null,e.index+.5),!0),f(c,"mouseenter",e.onMouseEnterHalf?.bind(null,e.index+.5)),u(c,()=>e.icon),c})():null})(),null),h(r=>_(a,o(),r)),a})()}S(["click"]);const j=v("<div><span>");function V(e){const s=()=>y(e,"cm-rate",{"cm-rate-disabled":e.disabled});if(!e.icon)return console.warn("need icon property"),null;const[d,o]=F(e,0),[a,t]=w(d()),r=e.allowHalf||!1,c=n=>{t(n)},g=(n,l)=>{r&&(l.preventDefault(),l.stopPropagation(),t(n))},H=()=>{t(d())},E=n=>{o(n),e.onChange&&e.onChange(n)},k=(n,l)=>{l.preventDefault(),l.stopPropagation(),r&&(o(n),e.onChange&&e.onChange(n))},x=e.count||5,C=[];for(let n=0;n<x;n++)C.push({id:n,value:n});return(()=>{const n=j(),l=n.firstChild;return n.addEventListener("mouseleave",H),u(n,$(L,{each:C,children:(i,m)=>$(P,{get index(){return m()},onMouseEnterHalf:g,onClickHalfStar:k,onMouseEnter:c,onClickStar:E,get icon(){return e.icon},allowHalf:r,current:[a,t]})}),l),u(l,()=>e.children),h(i=>{const m=e.style,M=s();return i._v$=R(n,m,i._v$),i._v$2=_(n,M,i._v$2),i},{_v$:void 0,_v$2:void 0}),n})()}export{V as R};
