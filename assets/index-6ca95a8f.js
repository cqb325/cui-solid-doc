import{c as S,ah as j,a0 as z,e as $,i as g,a as l,C as L,F as I,aD as A,ao as B,I as E,J as P,j as V,t as h,ak as J,aj as R,u as q,k as G,s as H,l as K}from"./index-0bf9b376.js";const M=h("<div>"),N=h('<div class="cm-select-options"><ul class="cm-select-option-list">'),Q=h('<div class="cm-select-options-wrap">');function U(t){const[u,v]=S(!1),w=t.align??"bottomLeft",[d,b]=j(t,""),k=()=>K(t,"cm-select","cm-autocomplete",{"cm-select-disabled":t.disabled,[`cm-select-${t.size}`]:t.size,"cm-select-clearable":!t.disabled&&t.clearable&&d().length!==0,"cm-select-open":u(),"cm-select-with-prefix":t.prefix});let _;const m="label",s=t.valueField||"value";let r=[];t.data&&(r=t.data.map(e=>typeof e=="object"?(e._show=!0,e):{[s]:e,label:e,_show:!0}));const[c,C]=z({list:r});$(()=>{const e=d();C("list",n=>n,J(n=>{n._checked=e===n[s]}))}),$(()=>{t.data&&(r=t.data.map(e=>typeof e=="object"?(e._show=!0,e):{[s]:e,label:e,_show:!0}),C("list",()=>[...r]),r.length&&v(!0))});const F=e=>{b(e),t.onChange&&t.onChange(e)},x=()=>{const e=d();let n;return R(()=>{n=c.list.find(a=>a[s]===e)}),n?n[m]:t.emptyOption?t.emptyOption:""},y=e=>{e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),t.onChange&&t.onChange(""),b("")},D=e=>{e.target.value.length&&t.onSearch&&t.onSearch(e.target.value)},O=()=>!!(c.list&&c.list.length);return(()=>{const e=M(),n=_;return typeof n=="function"?q(n,e):_=e,g(e,l(P,{get transfer(){return t.transfer},align:w,get disabled(){return t.disabled},trigger:"click",visible:[u,v],onBeforeDrop:O,get menu(){return(()=>{const a=Q();return g(a,l(L,{get open(){return u()},get children(){const i=N(),f=i.firstChild;return g(f,l(I,{get each(){return c.list},children:o=>l(A,{get renderOption(){return t.renderOption},get visible(){return o._show},get disabled(){return o.disabled},data:o,get checked(){return o._checked},textField:m,onClick:F})})),i}})),a})()},get children(){return l(B,{get text(){return x()},get disabled(){return t.disabled},filter:!0,onInput:D,get clearable(){return t.clearable},onClear:y,get prepend(){return t.prefix},get size(){return t.size},get icon(){return l(E,{name:"chevron-down",class:"cm-select-cert"})}})}})),V(a=>{const i=k(),f=t.style;return a._v$=G(e,i,a._v$),a._v$2=H(e,f,a._v$2),a},{_v$:void 0,_v$2:void 0}),e})()}export{U as A};
