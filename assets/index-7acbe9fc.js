import{c as S,ah as j,a0 as z,e as $,i as h,a as l,C as L,F as I,aD as A,ao as B,I as E,J as P,j as V,t as v,ak as J,aj as R,u as q,k as G,s as H,l as K}from"./index-5ee3594d.js";const M=v("<div>"),N=v('<div class="cm-select-options"><ul class="cm-select-option-list">'),Q=v('<div class="cm-select-options-wrap">');function U(t){const[u,d]=S(!1),w=t.align??"bottomLeft",[f,b]=j(t,""),k=()=>K(t,"cm-select","cm-autocomplete",{"cm-select-disabled":t.disabled,[`cm-select-${t.size}`]:t.size,"cm-select-clearable":!t.disabled&&t.clearable&&f().length!==0,"cm-select-open":u(),"cm-select-with-prefix":t.prefix});let _;const m="label",r=t.valueField||"value";let c=[];t.data&&(c=t.data.map(e=>typeof e=="object"?(e._show=!0,e):{[r]:e,label:e,_show:!0}));const[s,C]=z({list:c});$(()=>{const e=f();C("list",n=>n,J(n=>{n._checked=e===n[r]}))}),$(()=>{t.data&&(c=t.data.map(e=>typeof e=="object"?(e._show=!0,e):{[r]:e,label:e,_show:!0}),C("list",()=>[...c]),c.length&&d(!0))});const F=(e,n)=>{b(e),t.onChange&&t.onChange(e,n),d(!1)},x=()=>{const e=f();let n;return R(()=>{n=s.list.find(a=>a[r]===e)}),n?n[m]:t.emptyOption?t.emptyOption:""},y=e=>{e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),t.onChange&&t.onChange(""),b("")},D=e=>{e.target.value.length&&t.onSearch&&t.onSearch(e.target.value)},O=()=>!!(s.list&&s.list.length);return(()=>{const e=M(),n=_;return typeof n=="function"?q(n,e):_=e,h(e,l(P,{get transfer(){return t.transfer},align:w,get disabled(){return t.disabled},trigger:"click",visible:[u,d],onBeforeDrop:O,get menu(){return(()=>{const a=Q();return h(a,l(L,{get open(){return u()},get children(){const i=N(),g=i.firstChild;return h(g,l(I,{get each(){return s.list},children:o=>l(A,{get renderOption(){return t.renderOption},get visible(){return o._show},get disabled(){return o.disabled},data:o,get checked(){return o._checked},valueField:r,textField:m,onClick:F})})),i}})),a})()},get children(){return l(B,{get text(){return x()},get disabled(){return t.disabled},filter:!0,onInput:D,get clearable(){return t.clearable},onClear:y,get placeholder(){return t.placeholder},get prepend(){return t.prefix},get size(){return t.size},get icon(){return l(E,{name:"chevron-down",class:"cm-select-cert"})}})}})),V(a=>{const i=k(),g=t.style;return a._v$=G(e,i,a._v$),a._v$2=H(e,g,a._v$2),a},{_v$:void 0,_v$2:void 0}),e})()}export{U as A};
