import{o as J,c as x,b as K,a as i,_ as E,f as g,g as b,i as r,A as Q,e as W,I as L,a5 as X,n as p,t as m,Z as ee,Y as te,u as M,h as w,s as I,$ as se,m as le,j as ne}from"./index-0246dc72.js";import{D as ae}from"./index-f2d33baf.js";import{B as S}from"./index-f479a69a.js";const oe=m("<div>"),re=m('<div class="cm-modal-footer">'),ie=m('<div><div class="cm-modal-header"><span class="cm-modal-close"></span></div><div class="cm-modal-body">'),ce=m('<div tabindex="1">'),de=m('<div class="cm-modal-title">'),ue=m('<div class="cm-modal-left"><div class="cm-modal-icon">'),me=m('<div class="cm-modal-right">');function fe(t){let c,$,d;const[e,a]=J(t,"visible",!1),[h,_]=x(!1),o=()=>ne(t,"cm-modal"),f=ee(),D=()=>({"cm-modal-wrap":!0,"cm-modal-visible":e(),"cm-modal-fullscreen":t.fullScreen}),O=()=>({"cm-modal-mask":!0,"cm-modal-mask-visible":e()}),A=()=>{t.onClickClose&&t.onClickClose(),y()},y=()=>{t.onClosed&&t.onClosed(),a(!1)},B=()=>{y(),t.onCancel&&t.onCancel()},V=()=>{if(t.onOk&&t.onOk(),t.loading){h()||_(!0);return}y()};K(()=>{e()?(c&&setTimeout(()=>{c.focus()},300),Z&&d&&d.reset()):_(!1)});const j=s=>{Y&&s.target===$&&a(!1)},q=s=>{s.keyCode===27&&a(!1)},P="cm-modal-portal",F=t.footer??!0,z=te(),N=t.okText||"确 定",R=t.cancleText||"取 消",U=t.mask??!0,Y=t.maskClosable??!0,Z=t.resetPostion??!1;return i(X,{get mount(){return E(P,P)},get children(){return[i(g,{when:U,get children(){const s=oe(),v=$;return typeof v=="function"?M(v,s):$=s,s.$$click=j,f-1!=null?s.style.setProperty("z-index",f-1):s.style.removeProperty("z-index"),b(n=>w(s,O(),n)),s}}),(()=>{const s=ce();s.$$keydown=q;const v=c;return typeof v=="function"?M(v,s):c=s,f!=null?s.style.setProperty("z-index",f):s.style.removeProperty("z-index"),r(s,i(ae,{ref(n){const u=d;typeof u=="function"?u(n):d=n},get bounds(){return t.bounds||"body"},get style(){return t.defaultPosition},handle:'.cm-modal-header[data-id="'+z+'"]',get disabled(){return t.disabled},get children(){const n=ie(),u=n.firstChild,C=u.firstChild,T=u.nextSibling;return Q(u,"data-id",`${z}`),r(u,(()=>{const l=W(()=>!!t.title);return()=>l()?(()=>{const k=de();return r(k,()=>t.title),k})():null})(),C),C.$$click=A,r(C,i(L,{name:"x"})),r(T,()=>t.children),r(n,i(g,{when:F,get children(){const l=re();return r(l,i(S,{type:"primary",get loading(){return h()},onClick:V,children:N}),null),r(l,i(S,{type:"default",className:"mr-10",onClick:B,children:R}),null),l}}),null),b(l=>{const k=o(),G=t.style,H=t.bodyStyle;return l._v$=w(n,k,l._v$),l._v$2=I(n,G,l._v$2),l._v$3=I(T,H,l._v$3),l},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n}})),b(n=>w(s,D(),n)),s})()]}})}function $e(){const[t,c]=x(!0),[$,d]=x(!0);return{open(e){d(!0),c(!0);let a="";e.status==="success"&&(a="check-circle"),e.status==="info"&&(a="info"),e.status==="warning"&&(a="alert-circle"),e.status==="error"&&(a="x-circle"),e.status==="confirm"&&(a="help-circle");const h=o=>{d(o),setTimeout(()=>{c(o)},250)};e.style={"min-width":"24vw",...e.style},e.visible=[$,h],e.defaultPosition={top:"200px",...e.defaultPosition};const _=E("cm-modal-portal","cm-modal-portal");se(()=>i(g,{get when(){return t()},get children(){return i(fe,le(e,{class:"cm-modal-instance",get children(){return[(()=>{const o=ue(),f=o.firstChild;return r(f,i(L,{name:a,size:24})),o})(),(()=>{const o=me();return r(o,()=>e.content),o})()]}}))}}),_)},success(e){return e.status="success",this.open(e)},info(e){return e.status="info",this.open(e)},warning(e){return e.status="warning",this.open(e)},error(e){return e.status="error",this.open(e)},confirm(e){return e.status="confirm",this.open(e)},remove(){d(!1),setTimeout(()=>{c(!1)},250)}}}const ke=$e();p(["click","keydown"]);export{fe as M,ke as m};
