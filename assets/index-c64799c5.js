import{ah as $,c as _,e as x,g as S,i as f,a as d,aE as M,ao as T,I as R,J as j,j as A,t as h,k as L,s as y,l as z}from"./index-425dee0a.js";const E=h('<div tabindex="1">'),H=h('<div class="cm-tree-select-wrap">'),I={All:0,Half:1,Leaf:2,Shallow:3};function F(e){const[i,c]=$(e,e.multi?[]:""),[m,g]=_(""),C=e.align??"bottomLeft";let l,r=I[e.mode??"Half"];const o=e.checkRelation??"related",k=()=>z(e,"cm-tree-select",{"cm-tree-select-disabled":e.disabled,[`cm-tree-select-${e.size}`]:e.size}),v=t=>{e.multi||e.onChange&&e.onChange(t.id)},b=t=>{o==="related"?(c(s()),e.onChange&&e.onChange(s())):(c(t),e.onChange&&e.onChange(t))},w=()=>{const t=e.multi?[]:"";c(t),e.onChange&&e.onChange(t)},V=(t,a)=>{let n=i();n.splice(n.indexOf(t.id),1),c([...n])},s=()=>{let t=[];switch(r){case 0:{t=l.getAllChecked();break}case 1:{t=l.getHalfChecked();break}case 2:{t=l.getChildChecked();break}case 3:{t=l.getShallowChecked();break}}return t};return x(()=>{const t=i();e.multi&&t.join(",")===s().join(",")||e.multi&&(o==="unRelated"?l.setValue(t):(r===0&&l.setValue(t),r===1&&l.setValue(t),r===2&&l.setValue(t),r===3&&(t.join(",")===s().join(",")?l.setValue(l.getAllChecked()):l.setValue(l.getIfSets(t)))))}),S(()=>{let t=i();if(e.multi){if(typeof t=="string"){t=t.split(","),c(t);return}setTimeout(()=>{let a=o==="related"?s():l.getAllChecked();const n=l.getAllCheckedData(a);g(n)})}else setTimeout(()=>{const a=l.getSelectNode();g(a?a.title:"")})}),e.ref&&e.ref({...l}),(()=>{const t=E();return f(t,d(j,{get transfer(){return e.transfer},align:C,get disabled(){return e.disabled},trigger:"click",get menu(){return(()=>{const a=H();return f(a,d(M,{get data(){return e.data},get multi(){return e.multi},onSelect:v,onChange:b,ref(n){const u=l;typeof u=="function"?u(n):l=n},get value(){return i()},get selected(){return e.multi?"":[i,c]},get checkRelation(){return e.checkRelation}})),a})()},get children(){return d(T,{get text(){return m()},get multi(){return e.multi},get showMax(){return e.showMax},get disabled(){return e.disabled},get showMore(){return e.showMore},get valueClosable(){return e.valueClosable},get clearable(){return e.clearable},onClear:w,get prepend(){return e.prepend},get size(){return e.size},get icon(){return d(R,{name:"chevron-down"})},onClose:V})}})),A(a=>{const n=k(),u=e.style;return a._v$=L(t,n,a._v$),a._v$2=y(t,u,a._v$2),a},{_v$:void 0,_v$2:void 0}),t})()}export{F as T};
