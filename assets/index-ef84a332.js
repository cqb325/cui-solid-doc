import{i as m,a as o,I as v,h as y,O as I,t as f,j as M,s as k,k as z}from"./index-69f0698f.js";import{I as S}from"./input-194e738a.js";import{c as w}from"./createField-bb19acb2.js";const L=f("<div>"),P=f('<span class="cm-spinner-plus">'),D=f('<span class="cm-spinner-subs">');function j(e){const $=()=>z(e,"cm-spinner",{[`cm-spinner-${e.size}`]:e.size,"cm-spinner-disabled":e.disabled}),[d,c]=w(e,Math.max(0,e.min??0)),x=(n,t)=>{n=n.replace(/[^0-9\.]/g,""),t.target.value=n},C=n=>{n.keyCode===38&&h(),n.keyCode===40&&r()},a=e.min||0,s=e.step||1,_=n=>{let t=n;e.max!==void 0&&(t=Math.min(t,e.max)),a!==void 0&&(t=Math.max(t,a)),Promise.resolve().then(()=>{c(t)}),e.onChange&&e.onChange(t)},h=()=>{if(e.disabled)return;let n=g(d(),s);if(e.loop&&e.max!==void 0&&a!==void 0&&n>e.max){const t=n-e.max;n=a+t-1}e.max!==void 0&&(n=Math.min(e.max,n)),c(n),e.onChange&&e.onChange(n),e.onPlus&&e.onPlus(n,s)},r=()=>{if(e.disabled)return;let n=g(d(),-s);if(e.loop&&e.max!==void 0&&a!==void 0&&n<a){const t=n-a;n=e.max+t+1}a!==void 0&&(n=Math.max(a,n)),c(n),e.onChange&&e.onChange(n),e.onSub&&e.onSub(n,s)};function g(n,t){let i,l;try{i=n.toString().split(".")[1].length}catch{i=0}try{l=t.toString().split(".")[1].length}catch{l=0}const u=Math.pow(10,Math.max(i,l));return(n*u+t*u)/u}return(()=>{const n=L();return m(n,o(S,{get size(){return e.size},get placeholder(){return e.placeholder},get disabled(){return e.disabled},onInput:x,notCreateFiled:!0,value:[d,c],onChange:_,onKeyDown:C,get append(){return[(()=>{const t=P();return t.$$click=h,m(t,o(v,{name:"chevron-up",size:12})),t})(),(()=>{const t=D();return t.$$click=r,m(t,o(v,{name:"chevron-down",size:12})),t})()]}})),y(t=>{const i=$(),l=e.style;return t._v$=M(n,i,t._v$),t._v$2=k(n,l,t._v$2),t},{_v$:void 0,_v$2:void 0}),n})()}I(["click"]);export{j as S};
