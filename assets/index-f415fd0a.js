import{n as j,a as r,i as h,e as E,g as F,h as O,s as x,f as I,t as b,c as V,r as A,b as k,F as B,I as P,D as R,R as M,U,u as q,j as G}from"./index-39ed6b74.js";import{C as H}from"./Collapase-6a7dbf01.js";import{V as J}from"./Value-b4958db5.js";import{c as K}from"./createField-e888742b.js";const N=b("<li>");function Q(e){const i=()=>({"cm-select-option":!0,"cm-select-group-wrap":e.data.children&&e.data.children.length,"cm-select-option-active":e.checked,"cm-select-option-disabled":e.data.disabled}),s=e.data[e.valueField];return r(I,{get when(){return e.visible},fallback:null,get children(){const c=N();return c.$$click=()=>e.onClick&&e.onClick(s,e.data),h(c,(()=>{const l=E(()=>!!e.renderOption);return()=>l()?e.renderOption(e.data):e.data[e.textField]})()),F(l=>{const u=i(),m=e.style;return l._v$=O(c,u,l._v$),l._v$2=x(c,m,l._v$2),l},{_v$:void 0,_v$2:void 0}),c}})}j(["click"]);const T=b("<div>"),W=b('<div class="cm-select-options"><ul class="cm-select-option-list">'),X=b('<div class="cm-select-options-wrap">');function te(e){const[i,s]=V(!1),c=e.align??"bottomLeft",[l,u]=K(e,""),m=()=>G(e,"cm-select","cm-autocomplete",{"cm-select-disabled":e.disabled,[`cm-select-${e.size}`]:e.size,"cm-select-clearable":!e.disabled&&e.clearable&&l().length!==0,"cm-select-open":i(),"cm-select-with-prefix":e.prefix});let $;const C="label",d=e.valueField||"value";let o=[];e.data&&(o=e.data.map(t=>typeof t=="object"?(t._show=!0,t):{[d]:t,label:t,_show:!0}));const[f,w]=A({list:o});k(()=>{const t=l();w("list",n=>n,M(n=>{n._checked=t===n[d]}))}),k(()=>{e.data&&(o=e.data.map(t=>typeof t=="object"?(t._show=!0,t):{[d]:t,label:t,_show:!0}),w("list",()=>[...o]),o.length&&s(!0))});const y=(t,n)=>{u(t),e.onChange&&e.onChange(t,n),s(!1)},D=()=>{const t=l();let n;return U(()=>{n=f.list.find(a=>a[d]===t)}),n?n[C]:e.emptyOption?e.emptyOption:""},S=t=>{t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),e.onChange&&e.onChange(""),u("")},L=t=>{t.target.value.length&&e.onSearch&&e.onSearch(t.target.value)},z=()=>!!(f.list&&f.list.length);return(()=>{const t=T(),n=$;return typeof n=="function"?q(n,t):$=t,h(t,r(R,{get transfer(){return e.transfer},align:c,get disabled(){return e.disabled},trigger:"click",visible:[i,s],onBeforeDrop:z,get menu(){return(()=>{const a=X();return h(a,r(H,{get open(){return i()},get children(){const g=W(),_=g.firstChild;return h(_,r(B,{get each(){return f.list},children:v=>r(Q,{get renderOption(){return e.renderOption},get visible(){return v._show},get disabled(){return v.disabled},data:v,get checked(){return v._checked},valueField:d,textField:C,onClick:y})})),g}})),a})()},get children(){return r(J,{get text(){return D()},get disabled(){return e.disabled},filter:!0,onInput:L,get clearable(){return e.clearable},onClear:S,get placeholder(){return e.placeholder},get prepend(){return e.prefix},get size(){return e.size},get icon(){return r(P,{name:"chevron-down",class:"cm-select-cert"})}})}})),F(a=>{const g=m(),_=e.style;return a._v$=O(t,g,a._v$),a._v$2=x(t,_,a._v$2),a},{_v$:void 0,_v$2:void 0}),t})()}export{te as A};
