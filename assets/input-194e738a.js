import{i as o,a as d,h as f,g as p,t as i,N as E,j as D,s as _,k as U,X as N,c as B,f as m,u as I,a3 as k,m as L,I as F}from"./index-69f0698f.js";import{c as W}from"./createField-bb19acb2.js";import{P as M}from"./index-227a106d.js";const O=i("<div>"),V=i('<span class="cm-word-count-prefix">'),H=i("<span>"),j=i("<span>/"),R=i('<span class="cm-word-count-suffix">');function T(e){const c=()=>(e.value??"").length>e.total,t=()=>{const u=e.value??"";return e.overflow&&c()?u.length-e.total:u.length},v=()=>{const u=e.value??"";return Math.min(u.length/e.total*100,100)},g=e.radius??10,s=()=>U(e,"cm-word-count");return(()=>{const u=O();return o(u,d(p,{get when(){return e.circle},get fallback(){return[(()=>{const r=V();return o(r,()=>c()?e.prefixOverflow:e.prefix),f(()=>r.classList.toggle("cm-word-count-overflow",!!c())),r})(),(()=>{const r=H();return o(r,t),f(()=>E(r,c()?"cm-word-count-overflow":"")),r})(),j(),(()=>{const r=H();return o(r,()=>e.total),r})(),(()=>{const r=R();return o(r,()=>c()?e.suffixOverflow:e.suffix),f(()=>r.classList.toggle("cm-word-count-overflow",!!c())),r})()]},get children(){return d(M,{type:"circle",radius:g,strokeWidth:1,hidePercent:!0,get value(){return v()}})}})),f(r=>{const x=s(),$=e.style;return r._v$=D(u,x,r._v$),r._v$2=_(u,$,r._v$2),r},{_v$:void 0,_v$2:void 0}),u})()}const X=i('<textarea class="cm-input">'),Y=i("<div>"),q=i('<div class="cm-input-prefix">'),A=i('<div class="cm-input-group-prepend">'),G=i('<input class="cm-input">'),J=i('<div class="cm-input-suffix">'),Q=i('<div class="cm-input-group-append">');function ne(e){const c=()=>U(e,"cm-input-wrapper",{"cm-input-disabled":e.disabled,"cm-input-auto-height":e.autoHeight,"cm-textarea":e.type==="textarea","cm-input-hidden":e.type==="hidden",[`cm-input-${e.size}`]:e.size,"cm-input-group-with-prefix":e.prefix,"cm-input-group-with-suffix":e.suffix,"cm-input-group-with-append":e.append,"cm-input-group-with-prepend":e.prepend}),[t,v]=N(e,["classList","class","name","style","disabled","size","type","append","prepend","prefix","suffix","suffixStyle","prefixStyle","clearable","value","onChange","onEnter","onKeyDown","onKeyUp","onInput","trigger"]),g={};t.suffixStyle&&t.suffixStyle.width&&(g["padding-right"]=t.suffixStyle.width+"px"),t.prefixStyle&&t.prefixStyle.width&&(g["padding-left"]=t.prefixStyle.width+"px");const[s,u]=W(e,""),[r,x]=B(s()),$=t.trigger||"blur",w=l=>{$==="input"&&(t.onChange&&t.onChange(l.target.value),u(l.target.value)),x(l.target.value),t.onInput&&t.onInput(l.target.value,l),e.type==="textarea"&&e.autoHeight&&z(l)};let y;const z=l=>{const n=l.target;y||(y=n.clientHeight),n.scrollHeight>y&&(n.value.split(`
`).length===1?n.style.height=`${y}px`:n.style.height="auto",n.style.overflowY="hidden",n.scrollTop=0,n.style.height=`${n.scrollHeight}px`)},C=l=>{},b=l=>{const n=l.target.value;$==="blur"&&t.onChange&&t.onChange(n),u(n)},P=()=>{t.onChange&&t.onChange(""),u("")},S=l=>{l.keyCode===13&&t.onEnter&&t.onEnter(s()),t.onKeyUp&&t.onKeyUp(l)},K=l=>{l.keyCode===13&&(u(l.target.value),t.onChange&&t.onChange(l.target.value)),t.onKeyDown&&t.onKeyDown(l)};return(()=>{const l=Y();return o(l,(()=>{const n=m(()=>!!t.prefix);return()=>n()?(()=>{const a=q();return o(a,()=>t.prefix),f(h=>_(a,t.prefixStyle,h)),a})():null})(),null),o(l,(()=>{const n=m(()=>!!t.prepend);return()=>n()?(()=>{const a=A();return o(a,()=>t.prepend),a})():null})(),null),o(l,d(p,{get when(){return t.type==="textarea"},get fallback(){return(()=>{const n=G(),a=e.ref;return typeof a=="function"?I(a,n):e.ref=n,k(n,L(v,{get value(){return s()},get autocomplete(){return e.autocomplete||"off"},onChange:C,onInput:w,onBlur:b,get disabled(){return t.disabled},style:g,onKeyDown:K,onKeyUp:S,get type(){return t.type}}),!1,!1),n})()},get children(){const n=X(),a=e.ref;return typeof a=="function"?I(a,n):e.ref=n,k(n,L(v,{get value(){return s()},spellcheck:!1,get autocomplete(){return e.autocomplete||"off"},wrap:"soft",onChange:C,onInput:w,onBlur:b,get disabled(){return t.disabled},style:g,onKeyDown:K,onKeyUp:S}),!1,!1),n}}),null),o(l,(()=>{const n=m(()=>!!(t.clearable&&s()));return()=>n()?d(F,{class:"cm-input-clear",name:"x-circle",onClick:P}):null})(),null),o(l,(()=>{const n=m(()=>!!(t.suffix||e.wordCount&&e.maxLength));return()=>n()?(()=>{const a=J();return o(a,d(p,{get when(){return e.wordCount&&e.maxLength},get fallback(){return t.suffix},get children(){return d(T,{get total(){return e.maxLength},get value(){return r()}})}})),f(h=>_(a,t.suffixStyle,h)),a})():null})(),null),o(l,(()=>{const n=m(()=>!!t.append);return()=>n()?(()=>{const a=Q();return o(a,()=>t.append),a})():null})(),null),f(n=>{const a=c(),h=t.style;return n._v$=D(l,a,n._v$),n._v$2=_(l,h,n._v$2),n},{_v$:void 0,_v$2:void 0}),l})()}export{ne as I,T as W};
